<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://thymeleaf.org/thymeleaf-extras-springsecurity3"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	lang="en"
	data-framework="angular-js">
	<title> Voting </title>
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet"></link>
	<link href="css/app.css" rel="stylesheet"></link>
	<script type="text/javascript" src="js/libs/angular.js"></script>
	<script type="text/javascript" src="js/libs/angular-route.js"></script>
	<script type="text/javascript" src="js/app.js"></script>
	<script type="text/javascript" src="js/controllers/homeControl.js"></script>
	<script type="text/javascript" src="js/controllers/electionControl.js"></script>
	<script type="text/javascript" src="js/controllers/ballotControl.js"></script>
		<script type="text/javascript" src="js/controllers/resultsControl.js"></script>
	<body ng-app="voting">
	<ng-view />
	<script type="text/ng-template" id="home.html">
		<div class="header">
			<h1> Vote Online </h1>
			<p class="error">{{error}}</p>
			<button ng-click="toggle()"> <span ng-class="{hide: reg}"> log in </span> <span ng-class="{hide: !reg}"> register </span> </button>
		</div>
		<div ng-class="{hide: reg}">
			<h2> Register to Vote </h2>
			<label> Full Name </label> <input type="text" ng-model="newVoter.name"/>
			<label> Password </label> <input type="password" ng-model="newVoter.password"/>
			<label> Region </label>
			<select ng-model="newVoter.region" ng-options="x for x in regions"></select>
			<button ng-click="register()"> sign up </button>
		</div> 
		<div ng-class="{hide: !reg}">
			<h2> Log In </h2> 
			<label> Full Name </label> <input type="text" ng-model="voter.name"/>
			<label> Password </label> <input type="password" ng-model="voter.password"/>
			<button ng-click="login()"> log in </button>
		</div>
	</script>
	<script type="text/ng-template" id="election.html">
		<h1> Elections </h1>
		<p class="error" ng-model="error">{{error}} </p>
		<table>
			<tr>
			    <th>ID</th>
			    <th>Start Date</th>
			    <th>End Date</th>
			</tr>
			<tr ng-click="goToElection(e.id)" ng-repeat="e in elections">
			    <td> {{e.id}} </td>
			    <td> {{e.startDate}} </td>
			    <td> {{e.endDate}} </td>
			</tr>
		</table>
		<button ng-click="logout()"> logout </button>
	</script>
	<script type="text/ng-template" id="ballot.html">
		<h1> Ballot #{{ballotId}} </h1>
		<div class="ballot">
			<p class="error">{{error}}</p>
			<div class="question" ng-repeat="q in questions">
				<h2>#{{q.q.id + ". " + q.q.body }} </h2>
				<p> {{q.q.type }} </p>
				<div class="row" ng-repeat="c in q.candidates">
					<label ng-show="q.q.type === 'yes or no'">{{c.body}}</label>
					<input ng-value="c.id" ng-model="answers[q.q.id]['id']" type="radio" ng-show="q.q.type === 'yes or no'" />
					<label ng-show="q.q.type==='pick two'">{{c.body}}</label>
					<input value="true" type="checkbox" ng-model="answers[q.q.id][c.id]" ng-change="checkbox(c, q.q.id)" ng-show="q.q.type === 'pick two'"/>
					<label ng-show="q.q.type === 'instant runoff'"> choice {{q.candidates.indexOf(c) + 1}} </label>
					<select ng-value="q.candidates.indexOf(c)+1" ng-model="answers[q.q.id][c.id]" ng-options="x.body for x in q.candidates" ng-show="q.q.type === 'instant runoff'"/>
				</div>
				<div class="row" ng-show="q.q.type === 'pick two' || q.q.type === 'instant runoff'">
					<label> Write-in Candidate name: </label>
					<input class="writein" ng-model="q.candidates[q.candidates.length-1].body" type="text" />
				</div>
				<hr/>
			</div>
			<button ng-click="vote()"> Submit your ballot </button>
		</div>
	</script>
	<script type="text/ng-template" id="results.html">
		<div>
			<h1> Votes </h1>
			<table>
			<tr>
			    <th>ID</th>
			    <th>Question</th>
			    <th>Candidate</th>
			    <th>Voter ID</th>
			    <th>Ballot ID</th>
			    <th>Rank</th>
			</tr>
			<tr ng-repeat="vr in voteresults">
			    <td> {{vr.id}} </td>
			    <td> {{vr.question}} </td>
			    <td> {{vr.candidate}} </td>
			    <td> {{vr.voterId}} </td>
			    <td> {{vr.ballotId}} </td>
			    <td> {{vr.rank}} </td>
			</tr>
		</table>
			<button ng-click="logout()" ng-class="{hide: !vwt}"> Log out </button>
		</div>
	</script>
	</body>
	</html>